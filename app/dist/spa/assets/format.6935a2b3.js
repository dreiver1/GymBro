import{n as Y,a5 as M,m as q,t as $,p as k,K as x,V as p,x as d,I as B,a6 as F}from"./index.22855cfa.js";import{c as I}from"./QBtn.49d23cf8.js";import{b as K,a as _,h as j}from"./scroll.63f0c472.js";function Q(o,e,i){let l;function r(){l!==void 0&&(M.remove(l),l=void 0)}return Y(()=>{o.value===!0&&r()}),{removeFromHistory:r,addToHistory(){l={condition:()=>i.value===!0,handler:e},M.add(l)}}}const Z={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},ee=["beforeShow","show","beforeHide","hide"];function oe({showing:o,canShow:e,hideOnRouteChange:i,handleShow:l,handleHide:r,processOnMount:v}){const s=k(),{props:n,emit:a,proxy:V}=s;let u;function X(t){o.value===!0?y(t):L(t)}function L(t){if(n.disable===!0||t!==void 0&&t.qAnchorHandled===!0||e!==void 0&&e(t)!==!0)return;const f=n["onUpdate:modelValue"]!==void 0;f===!0&&(a("update:modelValue",!0),u=t,x(()=>{u===t&&(u=void 0)})),(n.modelValue===null||f===!1)&&E(t)}function E(t){o.value!==!0&&(o.value=!0,a("beforeShow",t),l!==void 0?l(t):a("show",t))}function y(t){if(n.disable===!0)return;const f=n["onUpdate:modelValue"]!==void 0;f===!0&&(a("update:modelValue",!1),u=t,x(()=>{u===t&&(u=void 0)})),(n.modelValue===null||f===!1)&&H(t)}function H(t){o.value!==!1&&(o.value=!1,a("beforeHide",t),r!==void 0?r(t):a("hide",t))}function P(t){n.disable===!0&&t===!0?n["onUpdate:modelValue"]!==void 0&&a("update:modelValue",!1):t===!0!==o.value&&(t===!0?E:H)(u)}q(()=>n.modelValue,P),i!==void 0&&I(s)===!0&&q(()=>V.$route.fullPath,()=>{i.value===!0&&o.value===!0&&y()}),v===!0&&$(()=>{P(n.modelValue)});const S={show:L,hide:y,toggle:X};return Object.assign(V,S),S}let m=0,b,g,w,T=!1,C,z,A,c=null;function O(o){R(o)&&B(o)}function R(o){if(o.target===document.body||o.target.classList.contains("q-layout__backdrop"))return!0;const e=F(o),i=o.shiftKey&&!o.deltaX,l=!i&&Math.abs(o.deltaX)<=Math.abs(o.deltaY),r=i||l?o.deltaY:o.deltaX;for(let v=0;v<e.length;v++){const s=e[v];if(j(s,l))return l?r<0&&s.scrollTop===0?!0:r>0&&s.scrollTop+s.clientHeight===s.scrollHeight:r<0&&s.scrollLeft===0?!0:r>0&&s.scrollLeft+s.clientWidth===s.scrollWidth}return!0}function U(o){o.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function h(o){T!==!0&&(T=!0,requestAnimationFrame(()=>{T=!1;const{height:e}=o.target,{clientHeight:i,scrollTop:l}=document.scrollingElement;(w===void 0||e!==window.innerHeight)&&(w=i-e,document.scrollingElement.scrollTop=l),l>w&&(document.scrollingElement.scrollTop-=Math.ceil((l-w)/8))}))}function W(o){const e=document.body,i=window.visualViewport!==void 0;if(o==="add"){const{overflowY:l,overflowX:r}=window.getComputedStyle(e);b=K(window),g=_(window),C=e.style.left,z=e.style.top,A=window.location.href,e.style.left=`-${b}px`,e.style.top=`-${g}px`,r!=="hidden"&&(r==="scroll"||e.scrollWidth>window.innerWidth)&&e.classList.add("q-body--force-scrollbar-x"),l!=="hidden"&&(l==="scroll"||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar-y"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,p.is.ios===!0&&(i===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",h,d.passiveCapture),window.visualViewport.addEventListener("scroll",h,d.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",U,d.passiveCapture))}p.is.desktop===!0&&p.is.mac===!0&&window[`${o}EventListener`]("wheel",O,d.notPassive),o==="remove"&&(p.is.ios===!0&&(i===!0?(window.visualViewport.removeEventListener("resize",h,d.passiveCapture),window.visualViewport.removeEventListener("scroll",h,d.passiveCapture)):window.removeEventListener("scroll",U,d.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar-x"),e.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,e.style.left=C,e.style.top=z,window.location.href===A&&window.scrollTo(b,g),w=void 0)}function D(o){let e="add";if(o===!0){if(m++,c!==null){clearTimeout(c),c=null;return}if(m>1)return}else{if(m===0||(m--,m>0))return;if(e="remove",p.is.ios===!0&&p.is.nativeMobile===!0){c!==null&&clearTimeout(c),c=setTimeout(()=>{W(e),c=null},100);return}}W(e)}function te(){let o;return{preventBodyScroll(e){e!==o&&(o!==void 0||e===!0)&&(o=e,D(e))}}}function le(o,e,i){return i<=e?e:Math.min(i,Math.max(e,o))}function re(o,e,i){if(i<=e)return e;const l=i-e+1;let r=e+(o-e)%l;return r<e&&(r=l+r),r===0?0:r}export{ee as a,oe as b,Q as c,le as d,te as e,re as n,Z as u};
